name = "myamori"
main = "src/index.ts"
compatibility_date = "2025-01-01"

# Secrets (set via `wrangler secret put` or GitHub Secrets in CI):
# - TELEGRAM_BOT_TOKEN
# - TELEGRAM_WEBHOOK_SECRET
# - ANTHROPIC_API_KEY
# - ALLOWED_USER_IDS
# - TAVILY_API_KEY

[[d1_databases]]
binding = "DB"
database_name = "${D1_DATABASE_NAME}"
database_id = "${D1_DATABASE_ID}"
migrations_dir = "drizzle/migrations"

[[workflows]]
name = "agent-workflow"
binding = "AGENT_WORKFLOW"
class_name = "AgentWorkflow"

[[r2_buckets]]
binding = "BUCKET"
bucket_name = "${R2_BUCKET_NAME}"

[env.staging]
name = "myamori-staging"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "${STAGING_D1_DATABASE_NAME}"
database_id = "${STAGING_D1_DATABASE_ID}"
migrations_dir = "drizzle/migrations"

[[env.staging.r2_buckets]]
binding = "BUCKET"
bucket_name = "${STAGING_R2_BUCKET_NAME}"